<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <title>Happy Birthday Prasansha!</title>
  <link href="https://fonts.cdnfonts.com/css/winky-rough" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Elms+Sans:ital,wght@0,100..900;1,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  
  <style>


/* Lightbox Caption Fix */
.lightbox-caption {
  color: #e84393 !important;
  font-size: 1.1em !important;
  margin-top: 15px !important;
  text-align: center !important;
  font-style: italic !important;
  padding: 12px 15px !important;
  line-height: 1.4 !important;
  background: rgba(232, 67, 147, 0.1) !important;
  border-radius: 12px !important;
  border: 1px solid rgba(232, 67, 147, 0.3) !important;
  max-width: 85% !important;
  word-wrap: break-word !important;
  white-space: normal !important;
  position: relative !important;
  z-index: 1002 !important;
}

/* Mobile-specific caption fixes */
@media (max-width: 768px) {
  .lightbox-caption {
    font-size: 1em !important;
    padding: 10px 12px !important;
    max-width: 90% !important;
    margin-top: 12px !important;
    line-height: 1.3 !important;
  }
  
  #lightbox-content {
    max-height: 75vh !important;
    padding-bottom: 10px !important;
  }
}

@media (max-width: 480px) {
  .lightbox-caption {
    font-size: 0.9em !important;
    padding: 8px 10px !important;
    max-width: 95% !important;
    margin-top: 10px !important;
    line-height: 1.3 !important;
  }
  
  #lightbox-content {
    max-height: 70vh !important;
  }
  
  #lightbox-prev,
  #lightbox-next {
    width: 40px !important;
    height: 40px !important;
    font-size: 2em !important;
  }
  
  #lightbox-close {
    width: 40px !important;
    height: 40px !important;
    font-size: 1.5em !important;
    top: 20px !important;
    right: 20px !important;
  }
}





    * { box-sizing: border-box; }
    @import url('https://fonts.googleapis.com/css2?family=Zilla+Slab:ital,wght@0,700;1,700&display=swap');

    .final-message-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(18, 18, 18, 0.95), rgba(30, 30, 40, 0.98));
      z-index: 2000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
      backdrop-filter: blur(10px);
    }
  

    .message-box {
      background: linear-gradient(145deg, rgba(40, 40, 50, 0.9), rgba(30, 30, 40, 0.95));
      border-radius: 20px;
      padding: 30px;
      max-width: 90%;
      width: 600px;
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(232, 67, 147, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(232, 67, 147, 0.3);
      position: relative;
      overflow: hidden;
      transform: translateY(30px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .message-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #ff6b6b, #e84393, #a29bfe);
      border-radius: 20px 20px 0 0;
    }

    .message-box.show {
      transform: translateY(0);
      opacity: 1;
    }

    .message-content {
      color: #e0e0e0;
      font-family: 'Montserrat', sans-serif;
      line-height: 1.7;
      text-align: center;
    }

    .message-title {
      font-size: 1.8em;
      color: #ff6b6b;
      margin-bottom: 25px;
      font-weight: 600;
      text-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
      letter-spacing: 0.5px;
    }

    .message-body {
      font-size: 1.1em;
      margin-bottom: 20px;
      font-weight: 400;
    }

    .message-highlight {
      font-size: 1.3em;
      color: #e84393;
      font-weight: 500;
      margin: 25px 0;
      text-shadow: 0 2px 8px rgba(232, 67, 147, 0.3);
      line-height: 1.6;
    }

    .message-footer {
      font-size: 0.9em;
      opacity: 0.7;
      margin-top: 30px;
      font-style: italic;
    }

    .blurred-text {
      filter: blur(8px);
      transition: all 0.6s ease;
      cursor: pointer;
      position: relative;
    }

    .blurred-text:hover {
      filter: blur(0);
    }

    .blurred-text::after {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(232, 67, 147, 0.9);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.8em;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      white-space: nowrap;
    }

    .blurred-text:hover::after {
      opacity: 1;
    }


    /* Add to your CSS */
.blurred-text::-webkit-scrollbar {
  width: 5px;
}

.blurred-text::-webkit-scrollbar-track {
  background: rgba(232, 67, 147, 0.1);
  border-radius: 10px;
}

.blurred-text::-webkit-scrollbar-thumb {
  background: rgba(232, 67, 147, 0.3);
  border-radius: 10px;
}
    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(232, 67, 147, 0.2);
      border: 1px solid rgba(232, 67, 147, 0.4);
      color: #ff6b6b;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      font-size: 1.3em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      z-index: 2001;
    }

    .close-btn:hover {
      background: rgba(232, 67, 147, 0.3);
      transform: scale(1.1);
    }

    .floating-hearts {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .floating-heart {
      position: absolute;
      font-size: 20px;
      opacity: 0;
      animation: float-heart 6s ease-in-out infinite;
    }

    @keyframes float-heart {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    @media (max-width: 768px) {
      .message-box {
        padding: 25px 20px;
        max-width: 95%;
        margin: 10px;
      }
      .message-title {
        font-size: 1.5em;
        margin-bottom: 20px;
      }
      .message-body {
        font-size: 1em;
      }
      .message-highlight {
        font-size: 1.1em;
      }
      .close-btn {
        width: 40px;
        height: 40px;
        font-size: 1.1em;
        top: 15px;
        right: 15px;
      }
    }

    @media (max-width: 480px) {
      .message-box {
        padding: 20px 15px;
        border-radius: 15px;
      }
      .message-title {
        font-size: 1.3em;
      }
      .message-body {
        font-size: 0.95em;
        line-height: 1.6;
      }
      .message-highlight {
        font-size: 1em;
        margin: 20px 0;
      }
      .blurred-text {
        filter: blur(6px);
      }
    }

    .welcome-message {
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-family: 'Zilla Slab', serif;
      font-weight: 700;
      font-size:2.5em;
      color:#e84393;
      text-shadow:2px 2px 4px rgba(0,0,0,0.3);
      opacity:0;
      z-index:100;
      pointer-events:none;
    }

    #wish-text {
      transition: all 0.3s ease;
    }

    #wish-text:focus {
      border-color: #e84393;
      box-shadow: 0 0 10px rgba(232, 67, 147, 0.3);
    }

    @media (max-width: 768px) {
      body {
        justify-content: flex-start;
        padding: 10px 0;
        overflow-y: auto;
        
      }
      #wish-text:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .container {
        padding: 15px;
        margin-top: 20px;
      }
      .memory-gallery {
        gap: 10px;
        margin-bottom: 20px;
      }
      .memory-item {
        width: 45%;
        height: 120px;
      }
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(232, 67, 147, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(157, 78, 221, 0.1) 0%, transparent 50%);
      animation: gentlePulse 8s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes gentlePulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.8; }
    }

    .shooting-star {
      position: fixed;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 10px 2px white;
      opacity: 0;
      z-index: 1;
      animation: shootStar 3s ease-out forwards;
    }

    @keyframes shootStar {
      0% {
        transform: translate(0, 0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translate(100vw, 100vh) rotate(360deg);
        opacity: 0;
      }
    }

    h1 {
      margin-bottom: 20px !important;
    }

    body {
      margin:0; padding:0;
      font-family:'Montserrat',sans-serif;
      text-align:center;
      transition:background-color 0.5s;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      align-items:center;
      background:#121212;
      color: #e0e0e0;
      overflow-x:hidden;
      position: relative;
      padding: 20px 0;
    }

    .container { 
      max-width:800px; 
      width:95%; 
      padding:20px; 
      position:relative; 
      z-index:10;
      margin: auto;
    }

    #gift-button {
      display: none;
      opacity: 0;
      transition: opacity 1s ease;
      padding: 12px 25px;
      border: none;
      border-radius: 25px;
      background: linear-gradient(45deg, #ff6b6b, #e84393);
      color: white;
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255,107,107,0.3);
      user-select:none;
      margin: 10px auto;
    }

    #gift-button:hover {
      background: linear-gradient(45deg, #e84393, #ff6b6b);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    #memories-button, #show-memories-button {
      background: linear-gradient(45deg, #0984e3, #74b9ff);
      display: none;
      padding: 10px 22px;
      border: none;
      border-radius: 20px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 3px 12px rgba(9,132,227,0.3);
      user-select:none;
      margin: 10px auto;
    }
    
    #lightbox-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    #lightbox-content img, 
    #lightbox-content video {
      max-width: 90%;
      max-height: 80vh;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
    }

    #memories-button:hover, #show-memories-button:hover {
      background: linear-gradient(45deg, #74b9ff, #0984e3);
    }

    .cake-container {
      position: relative;
      display: none;
      margin: 20px 0 30px 0;
      z-index: 5;
      cursor: pointer;
    }

    .cake {
      width: 180px;
      height: 100px;
      background: linear-gradient(to bottom, #f9c5d1, #f8a5c2);
      border-radius: 10px 10px 0 0;
      position: relative;
      margin: 0 auto;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }

    .cake:before {
      position: absolute;
      content: '';
      top: -10px;
      left: -10px;
      width: 200px;
      height: 20px;
      background: linear-gradient(to right, #f999b7, #f67eaa);
      border-radius: 10px;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }

    .candle {
      width:8px;
      height:40px; 
      background:linear-gradient(to bottom,#fff,#f0f0f0);
      position:absolute; 
      top:-45px;
      left:50%; 
      transform:translateX(-50%);
      border-radius:5px; 
      cursor:pointer; 
      box-shadow:0 2px 5px rgba(0,0,0,0.2);
    }

    .flame {
      width:12px;
      height:25px; 
      background:radial-gradient(#ffef00,#ff9e00);
      position:absolute; 
      top:-25px;
      left:50%; 
      transform:translateX(-50%);
      opacity:0; 
      border-radius:50% 50% 20% 20%; 
      filter:blur(1px);
      box-shadow:0 0 20px #ff6600,0 0 40px #ff9900;
    }
    .flame.burning { 
      opacity:1; 
      animation:flicker 0.5s infinite alternate; 
    }
    @keyframes flicker {
      0% { opacity:1; transform:translateX(-50%) scale(1); }
      100% { opacity:0.8; transform:translateX(-50%) scale(1.1); }
    }
    .birthday-message {
      font-size:1.1em; 
      color:#e0e0e0; 
      background:rgba(30,30,30,0.8);
      padding:20px; 
      border-radius:15px; 
      margin:20px 0; 
      max-width:90%;
      box-shadow:0 5px 15px rgba(0,0,0,0.3); 
      display:none; 
      line-height:1.6;
      white-space: pre-wrap;
      border: 1px solid #444;
    }
    .memory-gallery {
      display:none; 
      margin-top:20px; 
      flex-wrap:wrap; 
      justify-content:center; 
      gap:15px;
    }
    .memory-item {
      width:150px;
      height:150px;
      background:#2a2a2a;
      border-radius:12px;
      overflow:hidden;
      display:flex;
      justify-content:center;
      align-items:center;
      transition:all .3s;
      box-shadow:0 5px 15px rgba(0,0,0,0.3);
      border: 1px solid #444;
    }
    .memory-item:hover {
      transform:scale(1.05); 
      box-shadow:0 10px 25px rgba(0,0,0,0.4); 
      z-index:2;
    }
    .memory-item img, .memory-item video {
      width:100%; 
      height:100%; 
      object-fit:cover; 
      transition:transform .3s;
    }
    h1 {
      font-family: 'Winky Rough', cursive; 
      font-size:2.2em; 
      color:#e84393;
      text-shadow:2px 2px 4px rgba(0,0,0,0.3); 
      margin:0;
      margin-bottom: 40px !important;
    }
    #bg-music { display:none; }
    .balloon, .confetti, .floating-heart { 
      position:absolute; 
      z-index:1; 
    }
    .balloon {
      width:50px;
      height:70px;
      border-radius:50%; 
      opacity:0;
      animation:float 8s ease-in-out infinite;
      box-shadow:inset -5px -5px 10px rgba(0,0,0,0.2);
    }
    .balloon:before {
      content:''; 
      position:absolute; 
      bottom:-40px; 
      left:50%; 
      width:2px;
      height:40px;
      background:#444; 
      transform:translateX(-50%);
    }
    @keyframes float {
      0%,100%{transform:translateY(0)}50%{transform:translateY(-40px) rotate(5deg);}
    }
    .balloon.red{background:radial-gradient(circle at 30% 30%,#ff6b6b,#e84393);}
    .balloon.blue{background:radial-gradient(circle at 30% 30%,#74b9ff,#0984e3);}
    .balloon.green{background:radial-gradient(circle at 30% 30%,#55efc4,#00b894);}
    .balloon.yellow{background:radial-gradient(circle at 30% 30%,#ffeaa7,#fdcb6e);}
    .balloon.purple{background:radial-gradient(circle at 30% 30%,#a29bfe,#6c5ce7);}
    .confetti {
      width:8px; 
      height:8px; 
      animation:confetti-fall 3s linear forwards;
    }
    @keyframes confetti-fall {
      0% { transform:translateY(-100vh); opacity:1; }
      100% { transform:translateY(100vh); opacity:0; }
    }
    .floating-heart {
      font-size:18px; 
      color:#ff6b6b; 
      animation:float-up 4s ease-in forwards;
    }
    @keyframes float-up {
      0% { transform:translateY(0); opacity:1; }
      100% { transform:translateY(-100vh) rotate(360deg); opacity:0; }
    }
    .party-overlay {
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:rgba(255,255,255,0.05);
      backdrop-filter:blur(2px);
      z-index:3;
      display:none;
      pointer-events:none;
    }
    .fade-in { animation:fadeIn 1s forwards; }
    .fade-out { animation:fadeOut 1s forwards; }
    @keyframes fadeIn {
      from { opacity:0; transform:translate(-50%,-50%) scale(.8); }
      to { opacity:1; transform:translate(-50%,-50%) scale(1); }
    }
    @keyframes fadeOut{
      from {opacity:1;}
      to {opacity:0;}
    }
    #start-overlay {
      position: fixed;
      top:0; left:0;
      width:100%; height:100%;
      background: #121212;
      z-index: 9999;
      display:flex;
      justify-content:center;
      align-items:center;
      cursor:pointer;
      font-family: 'Rubik', sans-serif;
      font-size: 1.8em;
      color: #e84393;
      user-select:none;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      font-weight: 500;
    }
    @keyframes bounceFadeIn {
      0% {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
      }
      50% {
        opacity: 1;
        transform: translateY(-10px) scale(1.05);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    #gift-button.show {
      display: inline-block;
      animation: bounceFadeIn 1s ease forwards;
      opacity: 1;
    }

    #wish-container {
      display: none;
      margin: 20px auto;
      max-width: 90%;
    }
    
    #wish-text {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      border: 1px solid #444;
      background: rgba(30,30,30,0.8);
      color: #e0e0e0;
      font-family: 'Montserrat', sans-serif;
      font-size: 1em;
      margin-bottom: 15px;
      resize: none;
      min-height: 100px;
    }
    
    #submit-wish {
      padding: 12px 25px;
      border: none;
      border-radius: 25px;
      background: linear-gradient(45deg, #e84393, #ff6b6b);
      color: white;
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255,107,107,0.3);
      margin: 0 auto;
      display: block;
    }
    
    #submit-wish:hover {
      background: linear-gradient(45deg, #ff6b6b, #e84393);
    }
    
    #wish-message {
      display: none;
      color: #ff6b6b;
      font-weight: bold;
      margin-top: 15px;
      text-align: center;
    }
    .cake-sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: gold;
      border-radius: 50%;
      opacity: 0;
      animation: sparkle 2s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .heart-pulse {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      opacity: 0;
      z-index: 999;
      pointer-events: none;
      animation: heartPulse 2s ease-out forwards;
    }
    
    @keyframes heartPulse {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
    }
    
    @media (max-width: 600px) {
      h1 {
        font-size: 1.8em;
        margin-bottom: 30px !important;
      }
      .cake {
        width: 150px;
        height: 80px;
      }
      .cake:before {
        width: 170px;
      }
      .birthday-message {
        font-size: 1em;
        padding: 15px;
      }
      .memory-item {
        width: 130px;
        height: 130px;
      }
      .welcome-message {
        font-size: 2em;
      }
    }
    
    @media (max-width: 400px) {
      h1 {
        font-size: 1.5em;
        margin-bottom: 25px !important;
      }
      .memory-item {
        width: 100px;
        height: 100px;
      }
      #gift-button, #memories-button, #show-memories-button, #submit-wish {
        padding: 10px 20px;
        font-size: 1em;
      }
    }

    .blurred-text {
      font-size: 0.95em;
      line-height: 1.5;
      display: block;
      padding: 10px;
    }

    @media (max-width: 768px) {
      .blurred-text {
        font-size: 0.9em;
        line-height: 1.4;
        padding: 8px;
      }
    }

    @media (max-width: 480px) {
      .blurred-text {
        font-size: 0.85em;
        line-height: 1.4;
      }
    }


    /* Live Lyrics Styles */
/* Updated Live Lyrics Styles for Mobile */
.live-lyrics {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Elms Sans', sans-serif;
  font-size: 2.2em;
  color: #ffffff;
  text-align: center;
  text-shadow: 0 0 20px rgba(255, 107, 107, 0.8);
  opacity: 0;
  z-index: 2500;
  pointer-events: none;
  white-space: normal; /* Changed from nowrap to normal */
  padding: 25px 50px;
  background: rgba(18, 18, 18, 0.9);
  border-radius: 20px;
  backdrop-filter: blur(15px);
  border: 2px solid transparent;
  transition: all 0.5s ease-in-out;
  max-width: 90%; /* Increased from 80% */
  word-wrap: break-word; /* Ensure long words break */
  overflow-wrap: break-word; /* Modern alternative */
  line-height: 1.3; /* Better line spacing */
}

.live-lyrics::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, #ff6b6b, #e84393, #a29bfe, #6c5ce7);
  background-size: 400% 400%;
  border-radius: 22px;
  z-index: -1;
  animation: borderFlow 3s linear infinite;
}

.live-lyrics.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.live-lyrics.hide {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.8);
}

@keyframes borderFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
  .live-lyrics {
    font-size: 1.8em; /* Smaller font for tablets */
    padding: 20px 30px;
    max-width: 85%;
  }
}

@media (max-width: 480px) {
  .live-lyrics {
    font-size: 1.4em; /* Even smaller for phones */
    padding: 15px 20px;
    max-width: 90%;
    line-height: 1.4; /* Better spacing on small screens */
  }
}

@media (max-width: 360px) {
  .live-lyrics {
    font-size: 1.2em; /* Smallest size for very small screens */
    padding: 12px 15px;
  }
}

</style>
</head>
<body>
  <div id="start-overlay">Tap to Start. Use headphone for better sound üéâ</div>
  <div class="container">
    <h1 id="typing-text">üë∏ Happy Birthday Prasansha!</h1>
    <div class="cake-container" id="cake-container" title="Click the cake to light the candle">
      <div class="candle"><div class="flame"></div></div>
      <div class="cake"></div>
    </div>
    <button id="gift-button">A simple gift for you</button>
    <button id="memories-button">Message</button>
    <div class="birthday-message" id="birthday-message"></div>
    <button id="show-memories-button">Memories</button>
    <div class="memory-gallery" id="memory-gallery"></div>
    
    <div id="wish-container">
      <textarea id="wish-text" placeholder="Type your wish here... (Press Enter to send)"></textarea>
      <button id="submit-wish">Send Your Wish (3 left)</button>
      <p id="wish-message"></p>
    </div>
  </div>
  <div id="balloons-container"></div>
  <div class="party-overlay" id="party-overlay"></div>
  
  <div class="welcome-message" id="welcome-message-1">Hi Cutiepie</div>
  <div class="welcome-message" id="welcome-message-2">Gulumulu</div>
  <div class="welcome-message" id="welcome-message-3">Cupcake</div>
  <div class="welcome-message" id="welcome-message-4">Dumpling</div>
  <div class="welcome-message" id="welcome-message-5">I know it's unexpected</div>
  
  <div id="lightbox-modal" style="display:none; position:fixed;top:0;left:0;width:100vw;height:100vh; background:rgba(0,0,0,0.9); z-index:1000; justify-content:center; align-items:center; flex-direction: column;">
    <button id="lightbox-close" style="position:absolute;top:30px;right:30px; font-size:2em; background:rgba(30,30,30,0.8); border:none; color:white; cursor:pointer; width:50px; height:50px; border-radius:50%; display:flex; justify-content:center; align-items:center; z-index:1001; box-shadow: 0 0 15px rgba(0,0,0,0.5);">‚úñ</button>
    <button id="lightbox-prev" style="position:absolute;top:50%;left:30px; transform:translateY(-50%); font-size:2.5em; background:rgba(30,30,30,0.8); border:none; color:white; cursor:pointer; width:50px; height:50px; border-radius:50%; display:flex; justify-content:center; align-items:center; z-index:1001; box-shadow: 0 0 15px rgba(0,0,0,0.5);">‚óÄ</button>
    <div id="lightbox-content" style="max-width:90vw; max-height:85vh; display:flex; justify-content:center; align-items:center; position:relative;"></div>
    <button id="lightbox-next" style="position:absolute;top:50%;right:30px; transform:translateY(-50%); font-size:2.5em; background:rgba(30,30,30,0.8); border:none; color:white; cursor:pointer; width:50px; height:50px; border-radius:50%; display:flex; justify-content:center; align-items:center; z-index:1001; box-shadow: 0 0 15px rgba(0,0,0,0.5);">‚ñ∂</button>
  </div>

  <!-- Final Messages -->
  <div id="final-message" class="final-message-container">
    <button id="close-final-message" class="close-btn">‚úñ</button>
    <div class="message-box">
      <div class="message-content">
        <div class="message-title">No matter where life takes us...</div>
        <div class="message-body">Through all the changes, distances, and time that may pass between us...</div>
        <div class="message-highlight">You'll always be a special person in my heart üíü</div>
        <div class="message-footer">- Forever</div>
      </div>
    </div>
    <div class="floating-hearts" id="hearts-1"></div>
  </div>

  <div id="final-message-2" class="final-message-container">
    <button id="close-final-message-2" class="close-btn">‚úñ</button>
    <div class="message-box">
      <div class="message-content">
        <div class="message-title">Main jaanta hun hamare beech distance hey, alag religions hain...</div>
        <div class="message-body">...lekin pichle 649 din se mey sochte raha ki...<br>keya iye actually matter karta hey?<br><br>Kya ho sakta tha hamara?<br>Meyne eisa keya kar diya jisse tumhe mere upar itna nafrat hone lagi? Pata hey mera face accha nehi hey lekin....</div>
        <div class="message-highlight">Agar kabhi tumhe lage ki hamara bich kuch ho sakte hain...<br>main intezaar karunga ‚ù§Ô∏è pura jindegi bhar.</div>
      </div>
    </div>
    <div class="floating-hearts" id="hearts-3"></div>
  </div>

 <div id="final-message-3" class="final-message-container">
    <button id="close-final-message-3" class="close-btn">‚úñ</button>
    <div class="message-box">
      <div class="message-content">
        <div class="message-title">Kuch aur baat kehni thi...</div>
        <div class="message-body">
          <span class="blurred-text" style="font-size: 0.9em; line-height: 1.4; display: block; max-height: 50vh; overflow-y: auto; padding: 10px;">
üçõ Tumhare haath ka khana khane ka man karta hai<br>
üíû Tumhe hug karne ka, tumhari khushboo me kho jaane ka<br>
üì∫ Tumhare saath SPLITSVILLA dekhne ka<br>
üåü Dates pe jaane ka,<br>
üåô Raat bhar baatein karne ka<br>
üë®‚Äçüë©‚Äçüëß Aboard me tumhara sath family start karne ka sapna...<br><br>

Pata hai tumse baat karne ka bohooot jyada man karta hai<br>
lekin block karogey iye sochke message karne ka himaate nehi hota hey mera.

</span>
</div>
      </div>
    </div>
    <div class="floating-hearts" id="hearts-4"></div>
</div>
  <div id="final-goodbye" class="final-message-container">
    <button id="close-final-goodbye" class="close-btn">‚úñ</button>
    <div class="message-box">
      <div class="message-content">
        <div class="message-title">‚ù§Ô∏è</div>
        <div class="message-body">Kaash tumhe pehela jeysa bina daare message kar pata... <br>Haar raat gooodnightt aur subha goood morninggg keh pata...</div>
        <div class="message-highlight">Jo kuch bhi ho,Take care my chubby doll... Love you forever. <br>Tumhara bina ek ek din ek ek saal jeysa lagta hey, Prasansha. <br><br>Kaash mera jindegi ka aakhri time pe tumhe dekh pata üåÑüéê ‚ú®</div>
        <div class="message-body" style="font-style: italic; margin-top: 20px;">And once again, "Happy Birthday madam ji"</div>
      </div>
    </div>
    <div class="floating-hearts" id="hearts-5"></div>
  </div>

  <audio id="bg-music" loop preload="auto">
    <source src="https://www.dropbox.com/scl/fi/6h4jigjvixurrkd6s2pxf/One-Direction-Night-Changes-Audio.mp3?rlkey=nnzgpbygh9bpafpj9oo8e1gck&st=8thmkp47&dl=1" type="audio/mpeg"/>
  </audio>
  
  <script>
    // Mobile autoplay workaround
    document.addEventListener('DOMContentLoaded', function() {
      let audioUnlocked = false;
      const unlockAudio = () => {
        if (audioUnlocked) return;
        const silentAudio = new Audio();
        silentAudio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
        silentAudio.volume = 0;
        silentAudio.play().then(() => {
          audioUnlocked = true;
          silentAudio.pause();
          silentAudio.remove();
        }).catch(() => {});
      };
      document.addEventListener('click', unlockAudio);
      document.addEventListener('touchstart', unlockAudio);
      document.addEventListener('keydown', unlockAudio);
    });

    // Variables
    const startOverlay = document.getElementById('start-overlay');
    const giftButton = document.getElementById('gift-button');
    const cakeContainer = document.getElementById('cake-container');
    const flame = document.querySelector('.flame');
    const memoriesButton = document.getElementById('memories-button');
    const birthdayMessage = document.getElementById('birthday-message');
    const showMemoriesButton = document.getElementById('show-memories-button');
    const memoryGallery = document.getElementById('memory-gallery');
    const bgMusic = document.getElementById('bg-music');
    const finalMessage = document.getElementById('final-message');
    const closeFinalMessage = document.getElementById('close-final-message');
    const finalMessage2 = document.getElementById('final-message-2');
    const closeFinalMessage2 = document.getElementById('close-final-message-2');
    const finalMessage3 = document.getElementById('final-message-3');
    const closeFinalMessage3 = document.getElementById('close-final-message-3');
    const finalGoodbye = document.getElementById('final-goodbye');
    const closeFinalGoodbye = document.getElementById('close-final-goodbye');
    const lightboxModal = document.getElementById('lightbox-modal');
    const lightboxContent = document.getElementById('lightbox-content');
    const lightboxClose = document.getElementById('lightbox-close');
    const lightboxNext = document.getElementById('lightbox-next');
    const lightboxPrev = document.getElementById('lightbox-prev');
    const wishContainer = document.getElementById('wish-container');
    const wishText = document.getElementById('wish-text');
    const submitWish = document.getElementById('submit-wish');
    const wishMessage = document.getElementById('wish-message');
    const welcomeMessages = [
      document.getElementById('welcome-message-1'),
      document.getElementById('welcome-message-2'),
      document.getElementById('welcome-message-3'),
      document.getElementById('welcome-message-4'),
      document.getElementById('welcome-message-5')
    ];

    let currentIndex = 0;
    let balloonsActive = false;
    let wishCount = 3;
    let started = false;


 


    const memories = [
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/jwr4vspirerbzz4dc74da/IMG-20250718-WA0060.jpg?rlkey=ji352spt12i6momseziz49080&st=zfss0noo&dl=1' },
      { type: 'video', url: 'https://dl.dropboxusercontent.com/scl/fi/05l3vcsvgebwen673ra27/VID-20250718-WA0018.mp4?rlkey=lkeuttwo68l2p7c48u8a72ykh&st=pu4hrzpa&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/603qdagaor5u3ek10tjs6/IMG-20250718-WA0061.jpg?rlkey=8ugmvmekjk2pwacynhwrw9lb9&st=87z4hskz&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/lngj4243ahoqeg750c46o/IMG-20250718-WA0059.jpg?rlkey=2h4e4nzzx57rivf42mo5ae44m&st=0mzb1ckf&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/uiot74i488yuhwaq2p0jl/IMG-20250718-WA0058.jpg?rlkey=hj8rhkpxt7slzsy56i6b3r8no&st=fjetct7a&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/li3fvkj4z9ksea6w8ed8j/IMG-20250718-WA0057.jpg?rlkey=8s7z3eol4e3azvva48anjeybo&st=ybojoaie&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/l8ypf8o3c02evlmk5p68u/IMG_20251101_235252_485.jpg?rlkey=xokyjg9396vral1r9wn26emq5&st=hjl3n27s&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/0j8dopua4x3qudgmb24d0/IMG_20251101_235246_563.jpg?rlkey=8c97s098e1gwyshwtld3am3nz&st=zrpvxok1&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/uou6riqsfjpn6cgpaivd6/IMG_20251101_235243_458.jpg?rlkey=kp8e1sdvyjgvphv51pe6u06ga&st=h41ybcmv&dl=1' },
      { type: 'image', url: 'https://dl.dropboxusercontent.com/scl/fi/3hqion58o3t5s0q3e3y6b/IMG_20251101_235239_710.jpg?rlkey=eqspt6rb8hycotf7ilipg4ejc&st=ugeltzsp&dl=1' }
    ];

    const memoryCaptions = [
      "That look‚Ä¶ I could get lost in it forever üåπ",
      "Jab tum lip-sync karti ho, har ek lafz tumhari smile se aur bhi magical lagta hai‚Ä¶ üéµüíñ",
      "Yess‚Ä¶ That face, that smile‚Ä¶ Har photo mein tumhari khubsurti aur pyar mujhe mehsoos hota hai, jaise duniya ki har khoobsurti tumhare andar hi base ho ‚ù§Ô∏èüå∏",
      "Chhoti si masti, par har expression mein tumhari khubsurti aur pyaar nazar aata hai‚Ä¶ har photo ek yaad, har yaad ek feeling ‚ù§Ô∏èüêæ",
      "Red hair, twinkling smile, aur woh cute effect‚Ä¶ bas tum hi ho jo mujhe hamesha khus rehne par majboor kar deti ho",
      "Woh khula aasman aur tum‚Ä¶ jaise duniya ke saare stars bas tumhari hi taraf dekh rahe ho ‚ú®üíñ. Piche dekho, mujhe dikh raha hai‚Ä¶ wo cows, waise main hi hoon üòÑüêÑ",
      "Koi itni cute aur beautiful ek saath kaise ho sakti hai? üíì",
      "Bas tumhari aankhon mein kho jaane ka mann karta hai‚Ä¶ jaise duniya thodi si silent ho jaaye aur sirf tum aur ye pal rahe ‚ú®üñ§",
      "Har photo mein tumhari ek alag charm hai‚Ä¶ jaise tum khud ek little universe ho üå∏üåü",
      "Perfection exists, aur main use dekh raha hoon üåü"
    ];

    // Music setup
    bgMusic.volume = 0.5;

    // Enter key for wish
    wishText.addEventListener('keydown', function(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        if (wishText.value.trim() && wishCount > 0 && !submitWish.disabled) {
          submitWish.click();
        }
      }
    });

    // Final message functions
    function createFloatingHearts(containerId, count = 15) {
      const container = document.getElementById(containerId);
      if (!container) return;
      for (let i = 0; i < count; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = '‚ù§Ô∏è';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDelay = Math.random() * 6 + 's';
        heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
        container.appendChild(heart);
      }
    }

    function showFinalMessage(messageElement) {
      messageElement.style.display = 'flex';
      setTimeout(() => {
        const messageBox = messageElement.querySelector('.message-box');
        if (messageBox) messageBox.classList.add('show');
      }, 100);
    }

    function hideFinalMessage(messageElement, callback) {
      const messageBox = messageElement.querySelector('.message-box');
      if (messageBox) messageBox.classList.remove('show');
      setTimeout(() => {
        messageElement.style.display = 'none';
        if (callback) callback();
      }, 800);
    }

    // Page flow
  closeFinalMessage.addEventListener('click', function() {
  hideFinalMessage(finalMessage, function() {
    createFloatingHearts('hearts-3'); // Skip hearts-2
    showFinalMessage(finalMessage2); // Go directly to finalMessage2
  });
});

    closeFinalMessage2.addEventListener('click', function() {
      hideFinalMessage(finalMessage2, function() {
        createFloatingHearts('hearts-4');
        showFinalMessage(finalMessage3);
        
      });
    });

    closeFinalMessage3.addEventListener('click', function() {
      hideFinalMessage(finalMessage3, function() {
        createFloatingHearts('hearts-5');
        showFinalMessage(finalGoodbye);
      });
    });

 closeFinalGoodbye.addEventListener('click', function() {
  hideFinalMessage(finalGoodbye, function() {
    createHeartPulse();
    for (let i = 0; i < 50; i++) setTimeout(() => createConfetti(), i * 100);
    
    // Hide everything and show blank screen
    hideAllSiteElements();
    
    // Set blank screen background
    document.body.style.background = '#121212';
    
    // Start lyrics after a short delay on blank screen
    setTimeout(() => {
      startLyrics();
    }, 1500);
  });
});



 



    // Blurred text
    document.addEventListener('DOMContentLoaded', function() {
      const blurredText = document.querySelector('.blurred-text');
      if (blurredText) {
        blurredText.addEventListener('click', function() {
          this.style.filter = 'blur(0)';
          this.style.cursor = 'default';
        });
        blurredText.addEventListener('touchstart', function() {
          this.style.filter = 'blur(0)';
          this.style.cursor = 'default';
        });
      }
    });

    function createHeartPulse() {
      const heart = document.createElement('div');
      heart.className = 'heart-pulse';
      heart.textContent = 'üíü';
      document.body.appendChild(heart);
      setTimeout(() => {
        if (document.body.contains(heart)) document.body.removeChild(heart);
      }, 2000);
    }

    // Lightbox functions
    function openLightbox(index) {
      currentIndex = index;
      showMedia(currentIndex);
      lightboxModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      lightboxModal.style.display = 'none';
      lightboxContent.innerHTML = '';
      document.body.style.overflow = '';
      bgMusic.volume = 0.5;
    }

    function showMedia(index) {
  const mem = memories[index];
  lightboxContent.innerHTML = '';
  const mediaContainer = document.createElement('div');
  mediaContainer.style.display = 'flex';
  mediaContainer.style.flexDirection = 'column';
  mediaContainer.style.alignItems = 'center';
  mediaContainer.style.justifyContent = 'center';
  mediaContainer.style.maxWidth = '90vw';
  mediaContainer.style.maxHeight = '75vh'; // Reduced height for captions

  if(mem.type === 'image') {
    const img = document.createElement('img');
    img.src = mem.url;
    img.style.maxHeight = '60vh'; // Reduced image height
    img.style.maxWidth = '85vw';
    img.style.borderRadius = '10px';
    img.style.boxShadow = '0 0 20px rgba(255, 255, 255, 0.2)';
    img.onerror = function() {
      this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pjwvc3ZnPg==';
    };
    mediaContainer.appendChild(img);
  } else if(mem.type === 'video') {
    const vid = document.createElement('video');
    vid.src = mem.url;
    vid.controls = true;
    vid.autoplay = false;
    vid.style.maxHeight = '60vh'; // Reduced video height
    vid.style.maxWidth = '85vw';
    vid.style.borderRadius = '10px';
    vid.style.boxShadow = '0 0 20px rgba(255, 255, 255, 0.2)';
    vid.addEventListener('play', function() { bgMusic.volume = 0.1; });
    vid.addEventListener('pause', function() { bgMusic.volume = 0.5; });
    vid.addEventListener('ended', function() { bgMusic.volume = 0.5; });
    mediaContainer.appendChild(vid);
  }

  if (memoryCaptions[index]) {
    const caption = document.createElement('div');
    caption.className = 'lightbox-caption';
    caption.textContent = memoryCaptions[index];
    mediaContainer.appendChild(caption);
  }

  lightboxContent.appendChild(mediaContainer);
}
function nextMedia() {
      currentIndex = (currentIndex + 1) % memories.length;
      showMedia(currentIndex);
    }

    function prevMedia() {
      currentIndex = (currentIndex - 1 + memories.length) % memories.length;
      showMedia(currentIndex);
    }

    function setupMemoryClicks() {
      const items = memoryGallery.querySelectorAll('.memory-item');
      items.forEach((item, i) => {
        item.style.cursor = 'pointer';
        item.onclick = () => openLightbox(i);
      });
    }

    lightboxClose.onclick = closeLightbox;
    lightboxNext.onclick = nextMedia;
    lightboxPrev.onclick = prevMedia;

    function loadMemories() {
      if (memoryGallery.children.length > 0) return;
      memories.forEach(mem => {
        const div = document.createElement('div');
        div.className = 'memory-item';
        if (mem.type === 'image') {
          const img = document.createElement('img');
          img.src = mem.url;
          img.alt = 'Memory image';
          img.onerror = function() {
            this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9Ijc1IiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIE5vdCBGb3VuZDwvdGV4dD48L3N2Zz4=';
          };
          div.appendChild(img);
        } else if (mem.type === 'video') {
          const vid = document.createElement('video');
          vid.src = mem.url;
          vid.controls = false;
          vid.muted = true;
          vid.loop = true;
          vid.autoplay = true;
          div.appendChild(vid);
        }
        memoryGallery.appendChild(div);
      });

      setupMemoryClicks();
      setTimeout(() => {
        wishContainer.style.display = 'block';
        wishContainer.style.opacity = '0';
        setTimeout(() => {
          wishContainer.style.transition = 'opacity 1s ease';
          wishContainer.style.opacity = '1';
        }, 100);
      }, 500);
    }

    const balloonsContainer = document.getElementById('balloons-container');
    const partyOverlay = document.getElementById('party-overlay');
    const typingText = document.getElementById('typing-text');
    const fullText = 'üëë Happy Birthday Prasansha! ‚ú®üíì';
    let charIndex = 0;

    // Start overlay
    startOverlay.onclick = () => {
      if (started) return;
      started = true;
      startOverlay.style.display = 'none';
      const playAudio = () => {
        bgMusic.volume = 0;
        bgMusic.play().then(() => {
          let volume = 0;
          const fadeInInterval = setInterval(() => {
            volume += 0.05;
            if (volume >= 0.5) {
              volume = 0.5;
              clearInterval(fadeInInterval);
            }
            bgMusic.volume = volume;
          }, 50);
        }).catch(error => {
          document.addEventListener('click', function retryPlay() {
            bgMusic.play();
            document.removeEventListener('click', retryPlay);
          }, { once: true });
        });
      };
      playAudio();
      showWelcomeMessages();
    };

    function showWelcomeMessages() {
      document.querySelector('.container').style.opacity = '0';
      welcomeMessages.forEach((message, index) => {
        setTimeout(() => {
          message.classList.add('fade-in');
          setTimeout(() => {
            message.classList.replace('fade-in', 'fade-out');
            if (index === welcomeMessages.length - 1) {
              setTimeout(() => {
                document.querySelector('.container').style.opacity = '1';
                typeWriter();
              }, 1000);
            }
          }, 1000);
        }, index * 1500);
      });
    }

    function typeWriter() {
      if (charIndex < fullText.length) {
        typingText.textContent = fullText.slice(0, charIndex + 1);
        charIndex++;
        setTimeout(typeWriter, 120);
      } else {
        typingText.style.borderRight = 'none';
        setTimeout(() => {
          giftButton.classList.add('show');
        }, 1000);
      }
    }

    function createBalloons(count) {
      for (let i = 0; i < count; i++) {
        const balloon = document.createElement('div');
        balloon.classList.add('balloon');
        const colors = ['red', 'blue', 'green', 'yellow', 'purple'];
        balloon.classList.add(colors[i % colors.length]);
        balloon.style.left = Math.random() * 100 + 'vw';
        balloon.style.animationDelay = Math.random() * 5 + 's';
        balloon.style.opacity = '1';
        balloonsContainer.appendChild(balloon);
      }
      balloonsActive = true;
    }

    function createConfetti() {
      const confetti = document.createElement('div');
      confetti.classList.add('confetti');
      confetti.style.left = Math.random() * 100 + 'vw';
      confetti.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
      balloonsContainer.appendChild(confetti);
      setTimeout(() => {
        if (balloonsContainer.contains(confetti)) balloonsContainer.removeChild(confetti);
      }, 3000);
    }

    function createFloatingHearts() {
      const heart = document.createElement('div');
      heart.classList.add('floating-heart');
      heart.textContent = '‚ù§Ô∏è';
      heart.style.left = Math.random() * 100 + 'vw';
      balloonsContainer.appendChild(heart);
      setTimeout(() => {
        if (balloonsContainer.contains(heart)) balloonsContainer.removeChild(heart);
      }, 4000);
    }

    function openGift() {
      document.body.style.backgroundColor = '#1a1a1a';
      giftButton.style.display = 'none';
      cakeContainer.style.display = 'block';
      createBalloons(12);
      createConfetti();
      createFloatingHearts();
      partyOverlay.style.display = 'block';
      for(let i = 0; i < 8; i++) createCakeSparkle();
      setInterval(() => { if(Math.random() > 0.8) createShootingStar(); }, 5000);
      setInterval(() => { createConfetti(); createFloatingHearts(); }, 3000);
      setTimeout(() => { memoriesButton.style.display = 'inline-block'; createHeartPulse(); }, 1000);
    }

    function createCakeSparkle() {
      const sparkle = document.createElement('div');
      sparkle.className = 'cake-sparkle';
      const cakeRect = cakeContainer.getBoundingClientRect();
      sparkle.style.left = (Math.random() * 180 - 90) + cakeRect.left + 'px';
      sparkle.style.top = (Math.random() * 100 - 50) + cakeRect.top + 'px';
      sparkle.style.animationDelay = Math.random() * 2 + 's';
      document.body.appendChild(sparkle);
    }

    function lightCandle() {
      flame.classList.add('burning');
      createConfetti();
    }

    function typeText(element, text, speed, callback) {
      let i = 0;
      element.textContent = '';
      element.style.display = 'block';
      function typeNext() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(typeNext, speed);
        } else if (callback) callback();
      }
      typeNext();
    }

    // 3-Wish functionality
    submitWish.addEventListener('click', function() {
      const wish = wishText.value.trim();
      if (wish && wishCount > 0) {
        const botToken = '8233623504:AAHOce1na68q9d8IZNnA8WE_Ca_eL19CTSs';
        const chatId = '6643918586';
        const message = `üíå Wish ${4 - wishCount} from Prasansha:\n"${wish}"`;
        const originalText = submitWish.textContent;
        submitWish.textContent = 'Sending...';
        submitWish.disabled = true;
        
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ chat_id: chatId, text: message })
        })
        .then(response => response.json())
        .then(data => {
          wishCount--;
          if (wishCount > 0) {
            wishMessage.textContent = `‚ú® Your wish has been sent to the universe! ${wishCount} wish${wishCount > 1 ? 'es' : ''} remaining.`;
            submitWish.textContent = `Send Your Wish (${wishCount} left)`;
            wishMessage.style.display = 'block';
            wishText.value = '';
            for (let i = 0; i < 20; i++) setTimeout(() => createConfetti(), i * 100);
            createHeartPulse();
          } else {
            wishMessage.textContent = "All your wishes have been sent to the universe ‚ú®\n\nYour wishes are now traveling among the stars...";
            submitWish.style.display = 'none';
            wishText.disabled = true;
            wishText.placeholder = "Your 3 wishes have been sent to the universe ‚ú®";
            wishMessage.style.display = 'block';
            wishText.value = '';
            const erasingOverlay = document.createElement('div');
            erasingOverlay.style.position = 'fixed';
            erasingOverlay.style.top = '0';
            erasingOverlay.style.left = '0';
            erasingOverlay.style.width = '100%';
            erasingOverlay.style.height = '0%';
            erasingOverlay.style.background = '#121212';
            erasingOverlay.style.zIndex = '1999';
            erasingOverlay.style.transition = 'height 3s ease-in-out';
            document.body.appendChild(erasingOverlay);
            setTimeout(() => {
              erasingOverlay.style.height = '100%';
              setTimeout(() => {
                document.querySelector('.container').style.display = 'none';
                balloonsContainer.style.display = 'none';
                partyOverlay.style.display = 'none';
                erasingOverlay.style.display = 'none';
                createFloatingHearts('hearts-1');
                showFinalMessage(finalMessage);
                createHeartPulse();
                for (let i = 0; i < 100; i++) setTimeout(() => createConfetti(), i * 50);
                for (let i = 0; i < 20; i++) setTimeout(() => createFloatingHearts(), i * 200);
              }, 3000);
            }, 2000);
          }
        })
        .catch(error => {
          wishCount--;
          if (wishCount > 0) {
            wishMessage.textContent = `‚ú® Your wish has been sent to the universe! ${wishCount} wish${wishCount > 1 ? 'es' : ''} remaining.`;
            submitWish.textContent = `Send Your Wish (${wishCount} left)`;
          } else {
            wishMessage.textContent = "All your wishes have been sent to the universe ‚ú®\n\nYour wishes are now traveling among the stars...";
            submitWish.style.display = 'none';
            wishText.disabled = true;
            wishText.placeholder = "Your 3 wishes have been sent to the universe ‚ú®";
            setTimeout(() => {
              const erasingOverlay = document.createElement('div');
              erasingOverlay.style.position = 'fixed';
              erasingOverlay.style.top = '0';
              erasingOverlay.style.left = '0';
              erasingOverlay.style.width = '100%';
              erasingOverlay.style.height = '0%';
              erasingOverlay.style.background = '#121212';
              erasingOverlay.style.zIndex = '1999';
              erasingOverlay.style.transition = 'height 3s ease-in-out';
              document.body.appendChild(erasingOverlay);
              setTimeout(() => {
                erasingOverlay.style.height = '100%';
                setTimeout(() => {
                  document.querySelector('.container').style.display = 'none';
                  balloonsContainer.style.display = 'none';
                  partyOverlay.style.display = 'none';
                  erasingOverlay.style.display = 'none';
                  createFloatingHearts('hearts-1');
                  showFinalMessage(finalMessage);
                  createHeartPulse();
                  for (let i = 0; i < 100; i++) setTimeout(() => createConfetti(), i * 50);
                  for (let i = 0; i < 20; i++) setTimeout(() => createFloatingHearts(), i * 200);
                }, 3000);
              }, 2000);
            }, 1000);
          }
          wishMessage.style.display = 'block';
          wishText.value = '';
          for (let i = 0; i < 20; i++) setTimeout(() => createConfetti(), i * 100);
          createHeartPulse();
        })
        .finally(() => {
          submitWish.disabled = false;
        });
      }
    });

    giftButton.addEventListener('click', openGift);
    cakeContainer.addEventListener('click', () => {
      if (!flame.classList.contains('burning')) lightCandle();
    });

    memoriesButton.addEventListener('click', () => {
      memoriesButton.style.display = 'none';
      birthdayMessage.style.display = 'block';
      birthdayMessage.textContent = '';
      const message = `Happy Birthday Prasansha! üéâüíñ

You deserve all the happiness in the world today and always! 
May this year bring you endless joy.
Tum sachme 1 in billions ho. Incredibly special üíü. 
You're perfect just the way you are! üå∏

Tumse milne ka baad mujhe life pe aasli connnection ka pata chala.
Wishing you the most wonderful birthday filled with laughter, love, and everything that makes you smile! ‚ú®

Enjoy your special day to the fullest! üéÇüéÅ`;

      typeText(birthdayMessage, message, 40, () => {
        showMemoriesButton.style.display = 'inline-block';
        
      });
    });

    showMemoriesButton.addEventListener('click', () => {
      birthdayMessage.style.display = 'block';
      birthdayMessage.textContent = '';
      memoryGallery.style.display = 'none';
      const treasureMessage = "Maine ye photos ab tak sambhal ke rakhi hain. Ye tumhara ek hissa hain jo main bhool nahi sakta.Tumhari muskurahat, tumhari aankhein...Inhe dekhkar lagta hai jaise tum yahin ho mere paas üå∏";
      birthdayMessage.textContent = '';
      birthdayMessage.style.display = 'block';
      typeText(birthdayMessage, treasureMessage, 40, () => {
        memoryGallery.style.display = 'flex';
        loadMemories();
      });
    });

    function createShootingStar() {
      const star = document.createElement('div');
      star.className = 'shooting-star';
      star.style.left = Math.random() * 20 + 'vw';
      star.style.top = Math.random() * 30 + 'vh';
      star.style.animationDuration = (Math.random() * 2 + 2) + 's';
      document.body.appendChild(star);
      setTimeout(() => {
        if (document.body.contains(star)) document.body.removeChild(star);
      }, 3000);
    }

    // Stop music when leaving site
    window.addEventListener('beforeunload', function() {
      if (bgMusic) {
        bgMusic.pause();
        bgMusic.currentTime = 0;
      }
    });

    window.addEventListener('unload', function() {
      if (bgMusic) {
        bgMusic.pause();
        bgMusic.currentTime = 0;
      }
    });



    // Night Changes Lyrics with timestamps (in seconds)
const nightChangesLyrics = [
  { time: 8, text: "Going out tonight..." },
  { time: 10, text: "Changes into something red" },
  { time: 12, text: "Her mother doesn't like that kind of dress" },
  { time: 16, text: "Everything she never had she's showing off" },
  { time: 24, text: "Driving too fast..." },
  { time: 26, text: "Moon is breaking through her hair" },
  { time: 28, text: "She's heading for something that she won't forget" },
  { time: 32, text: "Having no regrets is all that she really wants" },
  { time: 40, text: "We're only getting older, baby" },
  { time: 44, text: "And I've been thinking about it lately" },
  { time: 48, text: "Does it ever drive you crazy" },
  { time: 52, text: "Just how fast the night changes?" },
  { time: 56, text: "Everything that you've ever dreamed of" },
  { time: 60, text: "Disappearing when you wake up" },
  { time: 64, text: "But there's nothing to be afraid of" },
  { time: 68, text: "Even when the night changes" },
  { time: 73, text: "It will never change me and you" },
  { time: 80, text: "Chasing her tonight..." },
  { time: 82, text: "Doubts are running 'round her head" },
  { time: 84, text: "He's waiting, hides behind a cigarette" },
  { time: 88, text: "Heart is beating loud and she doesn't want it to stop" },
  { time: 95, text: "Moving too fast..." },
  { time: 98, text: "Moon is lighting up her skin" },
  { time: 100, text: "She's falling, doesn't even know it yet" },
  { time: 104, text: "Having no regrets is all that she really wants" },
  { time: 112, text: "We're only getting older, baby" },
  { time: 117, text: "And I've been thinking about it lately" },
  { time: 120, text: "Does it ever drive you crazy" },
  { time: 124, text: "Just how fast the night changes?" },
  { time: 128, text: "Everything that you've ever dreamed of" },
  { time: 133, text: "Disappearing when you wake up" },
  { time: 136, text: "But there's nothing to be afraid of" },
  { time: 140, text: "Even when the night changes" },
  { time: 144, text: "It will never change me and you" },
  { time: 160, text: "Going out tonight..." },
  { time: 162, text: "Changes into something red" },
  { time: 164, text: "Her mother doesn't like that kind of dress" },
  { time: 168, text: "Reminds her of the missing piece of innocence she lost" },
  { time: 174, text: "We're only getting older, baby" },
  { time: 178, text: "And I've been thinking about it lately" },
  { time: 182, text: "Does it ever drive you crazy" },
  { time: 186, text: "Just how fast the night changes?" },
  { time: 190, text: "Everything that you've ever dreamed of" },
  { time: 194, text: "Disappearing when you wake up" },
  { time: 198, text: "But there's nothing to be afraid of" },
  { time: 202, text: "Even when the night changes" },
  { time: 206, text: "It will never change Baby" },
  { time: 210, text: "It will never change Baby" },
  { time: 214, text: "It will never change Me and You üíñ" },

];

let currentLyricIndex = 0;
let lyricsActive = false;
let lyricsElement = null;

// Function to create lyrics display
function createLyricsDisplay() {
  lyricsElement = document.createElement('div');
  lyricsElement.className = 'live-lyrics';
  document.body.appendChild(lyricsElement);
}

// Function to update lyrics based on current music time
function updateLyrics() {
  if (!lyricsActive || !lyricsElement || !bgMusic) return;
  
  const currentTime = bgMusic.currentTime;
  
  // Find the current lyric based on time
  let newLyricIndex = currentLyricIndex;
  
  // Check if we should move to next lyric
  if (currentLyricIndex < nightChangesLyrics.length - 1 && 
      currentTime >= nightChangesLyrics[currentLyricIndex + 1].time) {
    newLyricIndex = currentLyricIndex + 1;
  }
  
  // Check if we should go back (if user seeked backwards)
  if (currentLyricIndex > 0 && currentTime < nightChangesLyrics[currentLyricIndex].time) {
    newLyricIndex = currentLyricIndex - 1;
  }
  
  // Update if lyric changed
  if (newLyricIndex !== currentLyricIndex) {
    currentLyricIndex = newLyricIndex;
    
    // Hide current lyric
    lyricsElement.classList.remove('show');
    lyricsElement.classList.add('hide');
    
    // Update text after hide animation
    setTimeout(() => {
      lyricsElement.textContent = nightChangesLyrics[currentLyricIndex].text;
      lyricsElement.classList.remove('hide');
      lyricsElement.classList.add('show');
    }, 500);
  }
}

// Function to start lyrics synchronization
function startLyrics() {
  lyricsActive = true;
  
  // Create lyrics display if it doesn't exist
  if (!lyricsElement) {
    createLyricsDisplay();
  }
  
  // Find current position in song and set appropriate lyric
  const currentTime = bgMusic.currentTime;
  let startIndex = 0;
  
  // Find which lyric should be showing based on current music time
  for (let i = nightChangesLyrics.length - 1; i >= 0; i--) {
    if (currentTime >= nightChangesLyrics[i].time) {
      startIndex = i;
      break;
    }
  }
  
  currentLyricIndex = startIndex;
  
  // Set initial lyric
  lyricsElement.textContent = nightChangesLyrics[currentLyricIndex].text;
  lyricsElement.classList.add('show');
  
  // Start updating lyrics
  window.lyricsInterval = setInterval(updateLyrics, 100);
}

// Function to stop lyrics
function stopLyrics() {
  lyricsActive = false;
  if (window.lyricsInterval) {
    clearInterval(window.lyricsInterval);
  }
  if (lyricsElement) {
    lyricsElement.classList.remove('show');
    lyricsElement.classList.add('hide');
  }
}

// Function to hide all site elements for blank screen
function hideAllSiteElements() {
  const elementsToHide = [
    '.container',
    '#balloons-container',
    '#party-overlay',
    '.cake-container',
    '#gift-button',
    '#memories-button',
    '#show-memories-button',
    '#wish-container',
    '.birthday-message',
    '.memory-gallery'
  ];
  
  elementsToHide.forEach(selector => {
    const element = document.querySelector(selector);
    if (element) {
      element.style.display = 'none';
    }
  });
}




// Sync lyrics when music time updates
bgMusic.addEventListener('timeupdate', updateLyrics);

// Reset lyrics when music ends and restarts
bgMusic.addEventListener('ended', function() {
  stopLyrics();
  setTimeout(() => {
    currentLyricIndex = 0;
    if (lyricsActive) {
      startLyrics();
    }
  }, 100);
});

bgMusic.addEventListener('play', function() {
  if (lyricsActive && !window.lyricsInterval) {
    startLyrics();
  }
});

// Stop lyrics when page is hidden
document.addEventListener('visibilitychange', function() {
  if (document.hidden) {
    stopLyrics();
  } else if (lyricsActive && window.lyricsInterval === null) {
    startLyrics();
  }
});



// Add this to your existing JavaScript
function adjustLyricsForScreen() {
  if (!lyricsElement) return;
  
  // Force reflow to ensure proper sizing
  lyricsElement.style.display = 'none';
  setTimeout(() => {
    lyricsElement.style.display = 'block';
  }, 10);
}

// Call this when showing lyrics
window.addEventListener('resize', adjustLyricsForScreen);
  </script>
</body>
</html>
